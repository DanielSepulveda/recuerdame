name = "recuerdame-tldraw-sync"
main = "worker.ts"
compatibility_date = "2024-10-01"

# Durable Objects binding for room sync
[[durable_objects.bindings]]
name = "TLDRAW_ROOMS"
class_name = "TldrawDurableObject"
script_name = "recuerdame-tldraw-sync"

# Durable Object migrations
[[migrations]]
tag = "v1"
new_classes = ["TldrawDurableObject"]

# Development Environment
[env.dev]
name = "recuerdame-tldraw-sync-dev"

[[env.dev.r2_buckets]]
binding = "TLDRAW_BUCKET"
bucket_name = "dev-recuerdame-tldraw"

[env.dev.vars]
ALLOWED_ORIGINS = "http://localhost:3000"

# Production Environment
[env.production]
name = "recuerdame-tldraw-sync"

[[env.production.r2_buckets]]
binding = "TLDRAW_BUCKET"
bucket_name = "prd-recuerdame-tldraw"

[env.production.vars]
ALLOWED_ORIGINS = "http://localhost:3000,https://recuerdame.vercel.app,https://recuerdame.app"
